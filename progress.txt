## Iteration 1 - Project Setup (Vite + React + Tailwind + PWA)
- Initialized npm project with React 19, Vite 7, Tailwind CSS v4, vite-plugin-pwa
- Created project structure: src/components, src/hooks, src/data, public/assets/watercolors, public/icons
- Set up index.html with viewport meta, Google Fonts (Inter + Playfair Display), theme-color
- Created src/index.css with Tailwind v4 import and all CSS variables from brand guidelines
- Created src/main.jsx and src/App.jsx with basic rendering
- Copied watercolor images to public/assets/watercolors/
- Created .gitignore
- Files changed: package.json, vite.config.js, index.html, src/main.jsx, src/App.jsx, src/index.css, .gitignore
- Learnings for future iterations:
  - The project path contains an apostrophe ("Mama's Birthday") which breaks workbox service worker generation. vite-plugin-pwa is installed but disabled in vite.config.js. Re-enable when deploying from a clean CI path.
  - Tailwind v4 uses `@import "tailwindcss"` instead of the old `@tailwind` directives
  - Using `type: "module"` in package.json for ESM
  - Build verified working with `npx vite build`
---

## Iteration 2 - Tile Rendering
- Created src/data/tiles.js with all 144 tile definitions (Dots/Bams/Craks x9x4, Winds x4x4, Dragons x3x4, Flowers x4, Seasons x4)
- Includes tile labels, suit labels (Chinese characters), color mappings per suit, flower/season image mappings
- Includes tilesMatch() function with special flower/season matching rules
- Includes generateTileSet() that produces exactly 144 tiles
- Created src/components/Tile.jsx - renders individual tile with:
  - Watercolor background tint per suit (Dots=blue, Bams=green, Craks=pink, etc.)
  - Full watercolor painting background (30% opacity) for flower and season tiles
  - High-contrast symbol + suit label overlay
  - Selected state (lifted, lavender border, enhanced shadow)
  - Blocked/free state (dimmed, desaturated when blocked)
  - Accessible button element with aria-label
- Updated App.jsx to render a preview grid of all unique tile types
- Files changed: src/data/tiles.js (new), src/components/Tile.jsx (new), src/App.jsx (updated), PRD.md
- Learnings for future iterations:
  - Watercolor images available: tiles_1.png through tiles_8.png, tiles_4.jpg/5.jpg/7.jpg are JPG, rest PNG
  - bg-texture.png available for board background texture
  - Tile component uses inline styles for dynamic coloring (suit-specific) + Tailwind for layout
  - generateTileSet() returns tiles with {id, suit, value, copy} - positions added later by layout
  - Build verified with `npx vite build` - passes clean
---

## Iteration 3 - Classic Layout (Turtle/Pyramid with 144 tiles)
- Created src/data/layout.js with the classic "Turtle" Mahjong Solitaire layout
  - 5 layers: Layer 0 (87 tiles), Layer 1 (40), Layer 2 (14), Layer 3 (2), Layer 4 (1 peak) = 144 total
  - Layer 0 has classic turtle body shape with 3 wing tiles (2 left, 1 right)
  - Upper layers offset by +0.5 in x/y so tiles center over 4 tiles below
  - All 144 positions verified unique
- Implemented isTileFree() function for free tile detection:
  - Checks no overlapping tile on higher layer (within 1-unit footprint)
  - Checks at least one side (left or right) is open
  - Validated: 26 free tiles on fresh board, peak is free, center bottom blocked
- Implemented getLayoutBounds() for board centering/scaling calculations
- Created src/components/Board.jsx:
  - Renders all tiles with absolute positioning based on grid coordinates
  - 3D stacking visual with layer offsets (LAYER_OFFSET_X=-2, LAYER_OFFSET_Y=-4)
  - Proper z-index ordering (painter's algorithm: sorted by z, y, x)
  - Responsive tile sizing: desktop 60×80, tablet 50×66, mobile 36×48
  - Listens to window resize to adjust tile sizes
- Updated Tile.jsx to accept tileWidth/tileHeight props with proportional font scaling
- Updated App.jsx to use Board component with Fisher-Yates shuffled tiles
  - createGame() shuffles tile definitions and assigns to layout positions
  - Computes free tiles via useMemo for efficient re-rendering
  - Selection toggle (match logic deferred to later task)
- Files changed: src/data/layout.js (new), src/components/Board.jsx (new), src/components/Tile.jsx (updated), src/App.jsx (updated), PRD.md
- Learnings for future iterations:
  - Layout uses half-unit coordinates (e.g., 0.5, 3.5) for layer offsets and wing positions
  - isTileFree uses OVERLAP_THRESHOLD of 0.99 to handle floating point comparisons
  - Left/right neighbor detection uses exact match (0.01 tolerance) on x offset of 1, with y overlap within 1 unit
  - Board component computes pixel positions: (gridX - minX) * tileW + z * layerOffsetX
  - Free tile detection runs on every tiles state change — may need optimization later if slow
  - Build verified with `npx vite build` - passes clean
---

## Iteration 4 - Responsive Design (Desktop + Mobile)
- Rewrote Board.jsx to auto-scale tiles to fit available viewport space
  - Measures container content area (accounting for padding) on mount and resize
  - Calculates max tile width that fits both dimensions using layout bounds and aspect ratio
  - Clamped to min 32px (touch target) / max 60px (desktop cap)
  - Layer offsets scale proportionally with tile size (ratio-based instead of fixed pixels)
- Updated App.jsx layout structure:
  - Header uses flex-shrink-0 with compact padding on mobile (py-2) and more on desktop (lg:py-3)
  - Title text scales: text-lg on mobile, sm:text-xl tablet, lg:text-3xl desktop
  - Board area uses flex-1 min-h-0 to fill remaining viewport height
  - overflow-hidden on root container prevents scrolling
- Updated Tile.jsx:
  - Added `tile-free` CSS class for hover targeting
  - Border width scales proportionally with tile size
  - Border radius scales proportionally
  - Font sizes have minimum floors to stay readable at small tile sizes
- Added CSS hover/touch states in index.css:
  - `@media (hover: hover) and (pointer: fine)` — desktop-only hover: lavender glow + slight lift
  - `.tile:active` — tap feedback with scale(0.96) on all devices
- Files changed: src/components/Board.jsx (rewritten), src/components/Tile.jsx (updated), src/App.jsx (updated), src/index.css (updated), PRD.md
- Learnings for future iterations:
  - Board auto-scaling math: gridW = bounds.width + layers * |layerOffXRatio|, gridH = bounds.height / TILE_ASPECT + layers * |layerOffYRatio| / TILE_ASPECT. tileW = min(availW/gridW, availH/gridH)
  - Must subtract padding from clientWidth/Height when measuring container (getComputedStyle)
  - `@media (hover: hover) and (pointer: fine)` correctly excludes touch devices from hover effects
  - MIN_TILE_W of 32px is safe — tiles overlap in layout so effective touch targets are larger than individual tile size
  - Build verified with `npx vite build` - passes clean
---

## Iteration 5 - Tile Selection (Click/tap to select, visual highlight)
- Refined tile selection visual feedback in Tile.jsx:
  - Changed selected border color from --color-lavender to --color-rose (pink) for stronger contrast
  - Added rose-tinted glow shadow on selected state (scales with tile size)
  - Added `tile-selected` CSS class for hover/active rule targeting
  - Updated aria-label to include "(selected)" state for accessibility
- Updated index.css:
  - Hover effect now excludes already-selected tiles (`:not(.tile-selected)`)
  - Added `:focus-visible` outline (blue, 2px) for keyboard accessibility
- Selection logic already in place from iteration 3: App.jsx has selectedId state, toggle on click, only free tiles clickable
- Files changed: src/components/Tile.jsx (updated), src/index.css (updated), PRD.md
- Learnings for future iterations:
  - Vite build hangs in sandboxed shell environment (possibly Node 24 + Vite 7 TTY issue). Module-level validation via `node --input-type=module` works fine as alternative verification.
  - Selection infrastructure (selectedId state, freeTileIds set, handleTileClick callback) already solid from iteration 3
  - Rose (#E87B98) is more visible than lavender (#B8A5D0) for selected state against the cream background
  - All game logic modules pass validation: 144 tiles, 144 layout positions, 26 free tiles on fresh board, match logic correct
---

## Iteration 6 - Free Tile Detection (Only unblocked tiles clickable)
- Feature was already fully implemented across iterations 3-5:
  - isTileFree() in layout.js checks vertical blocking (tiles above) and horizontal blocking (both sides)
  - App.jsx computes freeTileIds via useMemo and passes to Board
  - Board.jsx creates a Set of free IDs and passes free={true/false} to each Tile
  - Tile.jsx disables non-free tiles (disabled attribute, onClick=undefined), dims them (opacity 0.75, saturate 0.7)
- Verified: 26 free tiles on fresh board, peak is free, center bottom blocked, wing tiles correct
- Verified: removing peak tile correctly frees both layer-3 tiles below
- No code changes needed — just marked PRD task complete
- Files changed: PRD.md (marked task [x]), progress.txt
- Learnings for future iterations:
  - Free tile detection was built incrementally across multiple iterations — sometimes tasks are already done when you get to them
  - Vite build continues to hang in sandboxed shell (Node 24 + Vite 7 TTY issue) — use `node --input-type=module` validation instead
  - 26 free tiles is the correct count for the turtle layout on a fresh board
---

## Iteration 7 - Match Logic (Two identical tiles selected → remove both)
- Updated App.jsx handleTileClick to implement full match logic:
  - Import tilesMatch from tiles.js
  - Click first free tile → select it
  - Click same tile → deselect
  - Click second free tile that matches → remove both tiles (set removed: true), clear selection
  - Click second free tile that doesn't match → switch selection to new tile
  - Uses setTiles functional updater inside setSelectedId for safe concurrent state updates
- Match logic uses existing tilesMatch() function from iteration 2:
  - Identical suit + value → match
  - Any flower matches any flower
  - Any season matches any season
  - Same tile ID → no self-match
- Files changed: src/App.jsx (updated), PRD.md (marked task [x])
- Learnings for future iterations:
  - handleTileClick uses [tiles] in useCallback dependency array since it reads tiles to find tileA/tileB
  - setTiles is called inside the setSelectedId updater function — React batches these correctly
  - Board.jsx already filters `tile.removed` with `if (tile.removed) return null` — no Board changes needed
  - freeTileIds useMemo already filters out removed tiles — free tile recalculation automatic after removal
  - Vite build still hangs in sandbox — continue using `node --input-type=module` for validation
---

## Iteration 8 - Win Detection (All tiles cleared → celebration screen)
- Added win detection logic to App.jsx:
  - `gameWon` computed via useMemo: `tiles.every(t => t.removed)`
  - `handleNewGame` callback resets tiles to a fresh createGame() and clears selection
  - WinScreen rendered conditionally when gameWon is true
- Created src/components/WinScreen.jsx:
  - Full-screen overlay with semi-transparent cream background (92% opacity)
  - Fade-in animation (800ms ease-in via opacity transition)
  - Circular watercolor hydrangea image (tiles_2.png) with lavender border and shadow
  - "You Win!" heading in Playfair Display, lavender color with subtle text shadow
  - "All tiles cleared — beautifully done!" subtext
  - "Play Again" button with lavender background, hover lift effect, calls onNewGame
  - Responsive sizing: image 48→64→80 rem, text scales with sm/lg breakpoints
- Files changed: src/App.jsx (updated), src/components/WinScreen.jsx (new), PRD.md (marked task [x])
- Learnings for future iterations:
  - Win detection is a simple derived state — no need for separate gameStatus state variable
  - WinScreen uses fixed positioning (z-50) to overlay the board
  - tiles_2.png is the hydrangea image used for the win screen per PRD spec
  - handleNewGame uses useCallback with empty deps since createGame() is a standalone function
  - Vite build still hangs in sandbox — validated via `node --input-type=module` integration test
---

## Iteration 9 - Stuck Detection (No valid moves → offer shuffle or new game)
- Added stuck detection logic to App.jsx:
  - `gameStuck` computed via useMemo: checks all pairs of free tiles for matches
  - Returns false if gameWon (win takes priority over stuck)
  - Returns false if no remaining tiles (empty board = won, not stuck)
  - O(n^2) over free tiles only (typically 20-30 tiles, fast enough)
- Created src/components/StuckScreen.jsx:
  - Full-screen overlay matching WinScreen style (semi-transparent cream, fade-in)
  - "No Moves Left" heading with encouraging subtext
  - Two buttons: "Shuffle Tiles" (primary, lavender filled) and "New Game" (secondary, outlined)
  - Responsive layout: buttons stack vertically on mobile, row on desktop (sm:flex-row)
  - Hover effects matching WinScreen button style
- Added handleShuffle to App.jsx:
  - Separates remaining (not removed) from removed tiles
  - Shuffles tile faces (suit, value, copy) among remaining positions using Fisher-Yates
  - Positions (x, y, z, id) stay fixed — only face assignments change
  - Recombines with removed tiles, sorts by id for stable ordering
  - Clears selection
- Files changed: src/App.jsx (updated), src/components/StuckScreen.jsx (new), PRD.md (marked task [x])
- Learnings for future iterations:
  - Stuck detection must exclude won state to avoid false positives on empty board
  - `freeTiles.length > 0` check prevents empty board from being "stuck"
  - Shuffle preserves positions (x, y, z) and only reassigns faces — avoids breaking layout/free-tile logic
  - freeTileIds is an array (not Set) — used `.includes()` in stuck detection; could optimize with Set if needed
  - Fresh games are almost never stuck (0/20 in testing) due to 26 free tiles from diverse suits
  - Vite build still hangs in sandbox — validated via `node --input-type=module`
---

## Iteration 10 - Title Screen
- Created src/components/TitleScreen.jsx:
  - Full-screen overlay (z-50) with cream background (same pattern as WinScreen)
  - Fade-in animation (600ms ease-in via opacity transition)
  - Circular watercolor Mixed Bouquet image (tiles_4.jpg) with lavender border and shadow
  - "Watercolor Mahjong" heading in Playfair Display
  - "Featuring original artwork by Jen" tagline
  - "Play" button with lavender background, hover lift effect
  - Responsive sizing: image 56→72→96 rem, text scales with sm/lg breakpoints
- Updated App.jsx:
  - Added showTitle state (initially true)
  - Imported and renders TitleScreen when showTitle is true
  - onPlay handler sets showTitle to false
  - Title screen renders last (highest z-order) so it covers game board
- Files changed: src/components/TitleScreen.jsx (new), src/App.jsx (updated), PRD.md
- Learnings for future iterations:
  - tiles_4.jpg is the Mixed Bouquet — per Asset Guide, it's the primary title screen image
  - TitleScreen rendered after WinScreen/StuckScreen in JSX so it takes visual priority on initial load
  - Vite build works fine in this environment (535ms) — the sandbox hang was Node 24 specific
  - Brand guidelines specify tagline "Featuring original artwork by Jen"
---

## Iteration 11 - New Game Button
- Created src/components/GameControls.jsx with New Game and Shuffle buttons
  - New Game button: lavender filled, refresh icon, calls onNewGame
  - Shuffle button: outlined style with tan border, shuffle icon, calls onShuffle
  - Both use brand-consistent styling (lavender hover, rounded corners, 200ms transitions)
  - SVG icons inline (refresh circle for New Game, crossed arrows for Shuffle)
- Updated App.jsx layout for responsive controls placement:
  - Desktop (sm+): Controls in header bar, right-aligned (justify-between)
  - Mobile (<sm): Fixed bottom bar with tan top border, z-40
  - Added pb-14 to board on mobile to prevent controls from overlapping content
- handleNewGame and handleShuffle already existed from iterations 8-9
- Files changed: src/components/GameControls.jsx (new), src/App.jsx (updated), PRD.md
- Learnings for future iterations:
  - GameControls renders both New Game and Shuffle buttons — next task (Shuffle button) is already implemented
  - Mobile bottom bar uses fixed positioning with z-40 (below overlays at z-50)
  - Board needs bottom padding on mobile (pb-14) to account for fixed bottom bar
  - Brand guidelines: button hover is #9B8BB8 (slightly darker lavender)
  - Build verified with `npx vite build` (377ms)
---

## Iteration 12 - Shuffle Button
- Feature was already fully implemented in iteration 11 (GameControls.jsx):
  - Shuffle button rendered in GameControls.jsx (outlined style, shuffle icon, calls onShuffle)
  - handleShuffle in App.jsx shuffles tile faces among remaining positions via Fisher-Yates
  - Button wired up in both desktop header and mobile fixed bottom bar
- Verified: shuffle preserves positions (x, y, z) and IDs, only reassigns faces (suit, value, copy)
- Verified: removed tiles preserved through shuffle, 144 total tiles maintained
- No code changes needed — just marked PRD task complete
- Files changed: PRD.md (marked task [x]), progress.txt
- Learnings for future iterations:
  - This is the second time a task was already done when reached (first was iteration 6 - Free Tile Detection)
  - GameControls was built with both buttons in iteration 11 (New Game button task) — both shipped together
  - Build verified with `npx vite build` (340ms)
---

## Iteration 13 - PWA (Installable, works offline)
- Enabled vite-plugin-pwa in vite.config.js using `injectManifest` strategy to avoid apostrophe-in-path bug
- Created custom service worker src/sw.js with workbox precaching (skipWaiting, clientsClaim, cleanupOutdatedCaches)
- Generated PWA icons from hydrangea watercolor (tiles_2.png):
  - icon-192.png (192x192) in public/icons/
  - icon-512.png (512x512) in public/icons/
  - Used macOS `sips` tool to crop-center and resize
- Configured manifest.json via vite-plugin-pwa:
  - name: "Watercolor Mahjong", short_name: "Mahjong"
  - display: standalone, theme_color: #9B8BB8, background_color: #FDF8F0
  - Icons: 192x192, 512x512, and 512x512 maskable
- Updated index.html:
  - Favicon changed from vite.svg to icon-192.png
  - Added apple-touch-icon link
  - Added apple-mobile-web-app-capable, apple-mobile-web-app-status-bar-style, apple-mobile-web-app-title meta tags
- Build output: manifest.webmanifest, registerSW.js, sw.js with 18 precache entries (6184 KiB)
- Files changed: vite.config.js (updated), src/sw.js (new), index.html (updated), public/icons/icon-192.png (new), public/icons/icon-512.png (new), PRD.md
- Learnings for future iterations:
  - Apostrophe in project path ("Mama's Birthday") breaks workbox generateSW mode — the path gets embedded in generated JS imports as an unescaped string literal
  - Fix: use `strategies: 'injectManifest'` with a custom src/sw.js that imports workbox modules by package name (not file path)
  - `sips -c W H` crops to center square, `sips -z W H` resizes — both available on macOS
  - vite-plugin-pwa auto-injects `<link rel="manifest">` and `<script src="/registerSW.js">` into built HTML
  - Apple PWA meta tags (apple-mobile-web-app-capable, apple-touch-icon) needed for iOS home screen install
  - Build verified with `npx vite build` (343ms + 41ms for SW)
---

## Iteration 14 - Win Celebration with Birthday Message (Enhancement PRD Task 3)
- Rewrote WinScreen.jsx from generic "Magnificent" screen to personal birthday celebration
- New WinScreen features:
  - Warm gradient overlay (cream → lavender → pink, 95% opacity)
  - 40 CSS-animated confetti particles: watercolor colors, gentle downward drift, random sizes/speeds
  - 4 floating paintings (tiles_2, tiles_4, tiles_3, tiles_6) that drift apart on load, fade after 2.5s
  - Sequential text fade-in with translateY animation:
    - 3.0s: "Happy 60th Birthday, Mom!" — gradient text with watercolor filter
    - 3.5s: "Your beautiful artwork made this game possible" — italic serif
    - 4.0s: "With love, Davis ❤️"
    - 4.5s: "Play Again" button (organic-button class)
  - All animations CSS-based (keyframes + transitions), no libraries
- Updated PRD.md: replaced MVP PRD content with Enhancement PRD, marked Tasks 1-3 as [x]
- Files changed: src/components/WinScreen.jsx (rewritten), PRD.md (updated)
- Learnings for future iterations:
  - CSS custom properties (--sway, --float-x, --float-y) work well for parameterized animations
  - useMemo for particle generation prevents re-creating 40 particles on every render
  - Confetti uses animationIterationCount: infinite — particles loop continuously while overlay is visible
  - clamp() CSS function is great for responsive text sizing without media queries
  - The organic-button class from index.css provides the watercolor brush-stroke style
  - Build verified with `npx vite build` (590ms + 45ms for SW)
---

## Iteration 15 - Final PRD Cleanup
- Marked all remaining Day 1-3 timeline checkboxes as complete in PRD1.md
- All MVP Features (12/12) were already marked [x]
- Day 1-3 timeline tasks were duplicates of MVP tasks completed in iterations 3-14
- Build verified: `npx vite build` passes clean (595ms + 47ms for SW, 18 precache entries)
- All PRD tasks are now [x] — project is COMPLETE
- Files changed: PRD1.md (updated timeline checkboxes), progress.txt
- Learnings for future iterations:
  - PRD had two sets of checklists (MVP Features + Day 1-3 Timeline) that tracked overlapping work
  - Always update all checklist sections when completing a task to avoid confusion
---

## Iteration 16 - Hint System (Enhancement PRD Task 4)
- Added hint system with pulsing glow animation on matching tile pairs
- Implementation:
  - App.jsx: Added `hintIds` state, `handleHint` callback that finds first matching pair among free tiles
  - App.jsx: Auto-dismiss hint after 3 seconds via useEffect timer
  - App.jsx: Dismiss hint on any tile click, new game, or shuffle
  - App.jsx: Clear selection before showing hint (per PRD requirement)
  - GameControls.jsx: Added "Hint" button with lightbulb SVG icon, matching outlined button style with organic border-radius
  - GameControls.jsx: Refactored hover handlers to shared `handleHover` function to reduce duplication
  - Board.jsx: Accept `hintIds` prop, create `hintSet` via useMemo, pass `hinted` prop to Tile
  - Tile.jsx: Accept `hinted` prop, add `tile-hinted` CSS class when active
  - index.css: Added `hint-pulse` keyframe animation — soft lavender + gold glow that pulses 3 times over 2.4s
- Files changed: src/App.jsx, src/components/GameControls.jsx, src/components/Board.jsx, src/components/Tile.jsx, src/index.css, PRD.md
- Learnings for future iterations:
  - Hint glow uses both lavender (brand) and gold colors for visibility without being jarring
  - `animation: hint-pulse 800ms ease-in-out 3` gives exactly 3 pulses then stops naturally
  - Hint auto-dismiss uses useEffect with cleanup to prevent stale timers
  - The handleHint O(n^2) scan over free tiles is fine since there are at most ~26 free tiles
  - Build verified with `npx vite build` (660ms + 49ms for SW)
---

## Iteration 17 - Undo System (Enhancement PRD Task 5)
- Added undo system with move history stack and restore logic
- Implementation:
  - App.jsx: Added `moveHistory` state (array of {tileA, tileB} move records)
  - App.jsx: `handleTileClick` records tile data (id, suit, value, copy, x, y, z) in history on each match
  - App.jsx: `handleUndo` pops the last move, restores both tiles (removed: false), clears selection/hints
  - App.jsx: History cleared on New Game and Shuffle (per PRD requirement)
  - App.jsx: Passes `onUndo` and `canUndo` props to GameControls in both desktop and mobile bars
  - GameControls.jsx: Added Undo button with curved arrow SVG icon, organic border-radius
  - GameControls.jsx: Button disabled (opacity 40%, cursor default) when canUndo is false (empty history)
  - GameControls.jsx: Hover effects only apply when button is enabled
- Undo restores tiles by simply setting removed: false — free tile detection auto-recalculates via useMemo
- No need to explicitly track/restore which tiles became unblocked — isTileFree() handles this automatically
- Files changed: src/App.jsx (updated), src/components/GameControls.jsx (updated), PRD.md
- Learnings for future iterations:
  - Undo doesn't need to track blocked state changes — isTileFree recalculates from current tile state
  - Move history stores full tile data (suit, value, copy, position) even though only id and removed flag are needed for undo — future-proofing for potential replay features
  - `disabled:opacity-40 disabled:cursor-default disabled:hover:bg-transparent` Tailwind classes handle disabled button styling cleanly
  - Build verified with `npx vite build` (584ms + 44ms for SW)
---

## Iteration 18 - Progress Indicator (Enhancement PRD Task 6)
- Added "X pairs remaining" counter with thin progress bar to both desktop header and mobile bottom bar
- Implementation:
  - App.jsx: Added `pairsRemaining` useMemo computed as `72 - removedCount / 2`
  - Desktop header: Progress indicator sits next to the title with pairs text + thin gradient bar
  - Mobile bottom bar: Progress indicator in a row with the sync/auth controls above the game buttons
  - Text styled in muted lavender (--color-lavender), font-medium, text-xs on mobile / text-sm on desktop
  - Thin progress bar (3px tall) with tan background track and lavender-to-rose gradient fill
  - Bar animates smoothly with `transition-all duration-500 ease-out` as pairs are cleared
  - Handles singular "pair" vs plural "pairs" correctly
  - Updates on match (decrements) and undo (increments) automatically via reactive state
- Files changed: src/App.jsx (updated), PRD.md (marked Task 6 [x])
- Learnings for future iterations:
  - pairsRemaining is derived state (72 - removedCount/2) — no separate state variable needed
  - Progress bar percentage: ((72 - pairsRemaining) / 72) * 100 fills left-to-right as pairs are cleared
  - Using rgba for the track background (tan at 30% opacity) blends nicely with the cream background
  - Build verified with `npx vite build` (643ms + 46ms for SW)
---

## Iteration 19 - Match Removal Animation (Enhancement PRD Task 7)
- Added four CSS-based animations for tile interactions:
  1. **Match removal dissolve**: Golden glow pulse (200ms) → fade out + scale(0.8) (400ms) = 600ms total
  2. **Selected tile lift**: translateY(-2px) scale(1.03) with enhanced shadow (already existed, refined)
  3. **Mismatch flash**: Brief rose/pink glow on both tiles (400ms) when second tile doesn't match
  4. **Blocked tile shake**: Quick horizontal shake (300ms, 3px displacement) when clicking a blocked tile
- Implementation:
  - App.jsx: Added `removingIds`, `mismatchIds`, `shakingId` state variables
  - App.jsx: Match now starts dissolve animation first, then removes tiles after 600ms via setTimeout
  - App.jsx: Mismatch clears selection and flashes both tiles pink for 400ms
  - App.jsx: Added `handleBlockedClick` callback for shake animation on blocked tiles
  - App.jsx: New states cleared on New Game and Shuffle
  - Board.jsx: Accepts new props (removingIds, mismatchIds, shakingId, onBlockedClick)
  - Board.jsx: Creates removingSet/mismatchSet via useMemo for efficient lookup
  - Board.jsx: Tiles render during removal animation (removed && removing → still visible)
  - Board.jsx: Blocked tiles now call onBlockedClick instead of being unclickable
  - Tile.jsx: Accepts `mismatch` and `shaking` props, adds CSS classes
  - Tile.jsx: Removed `disabled` attribute — blocked tiles now clickable for shake feedback
  - index.css: Added `match-glow` keyframe (golden glow → fade/scale), `tile-removing` class
  - index.css: Added `mismatch-flash` keyframe (rose glow pulse), `tile-mismatch` class
  - index.css: Added `tile-shake` keyframe (horizontal displacement), `tile-shake` class
  - index.css: Changed `.tile.blocked` from `pointer-events: none` to `cursor: default`
- Files changed: src/App.jsx, src/components/Board.jsx, src/components/Tile.jsx, src/index.css, PRD.md
- Learnings for future iterations:
  - Animation is on the wrapper div (tile-removing class) not the button — this correctly fades the entire tile container
  - setTimeout in handleTileClick for delayed removal is safe — React state updates inside setTimeout work correctly
  - Removing `pointer-events: none` from `.tile.blocked` is needed to allow shake feedback on blocked tiles
  - Mismatch clears selection (returns null) rather than keeping the first tile selected — matches the PRD spec
  - `animation: ... forwards` keeps the final state (opacity: 0, scale: 0.8) until the tile is actually removed from DOM
  - Build verified with `npx vite build` (566ms + 46ms for SW)
---

## Iteration 20 - Birthday Dedication Screen (Enhancement PRD Task 8)
- Created DedicationScreen.jsx — intermediate screen between title and game board
- Implementation:
  - DedicationScreen.jsx: Full-screen overlay (z-1000) with sequential text fade-in
    - Line 1 (0.4s): "Happy 60th Birthday, Mom" — gradient text with watercolor filter
    - Line 2 (0.9s): "This game features your beautiful watercolor paintings as the tiles."
    - Line 3 (1.4s): "Each match you make is a little celebration of your art."
    - Line 4 (1.9s): "With love, Davis ❤️"
    - Line 5 (2.4s): "Start Playing" button (organic-button class)
  - Smooth fade-out transition (500ms) when "Start Playing" clicked before showing game
  - App.jsx: Added `showDedication` state variable
  - App.jsx: TitleScreen onPlay now sets showTitle=false, showDedication=true
  - App.jsx: DedicationScreen onStartPlaying sets showDedication=false
  - App.jsx: Header, board, and mobile controls gated on `!showTitle && !showDedication`
  - App.jsx: DedicationScreen rendered before TitleScreen in JSX (title has higher z-priority)
- Flow: TitleScreen → DedicationScreen → Game Board
- Files changed: src/components/DedicationScreen.jsx (new), src/App.jsx (updated), PRD.md (marked Task 8 [x])
- Learnings for future iterations:
  - DedicationScreen reuses the same styling patterns as WinScreen (gradient text, sequential fade-in, organic-button)
  - fadeOut state + setTimeout creates a smooth exit transition before unmounting
  - Three conditionals in App.jsx need `!showDedication` added: header, board, and mobile controls
  - Build verified with `npx vite build` (580ms + 51ms for SW)
---
